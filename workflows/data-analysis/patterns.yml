# patterns.yml â€” file-reference normalization to 'study.<ext>' enabled
exclude_dirs:
  - ".git"
  - ".venv"
  - "venv"
  - ".Rproj.user"
  - "node_modules"

include_ext:
  - ".py"
  - ".R"
  - ".r"
  - ".Rmd"
  - ".sh"
  - ".bash"
  - ".zsh"
  - ".txt"
  - ".md"
  - ".csv"
  - ".tsv"
  - ".json"
  - ".yml"
  - ".yaml"
  - ".ini"
  - ".cfg"
  - ".toml"
  - ".sql"
  - ".ipynb"

size_limit_mb: 5

# Content replacements (keep your earlier ones if desired). You can still add name and path rules here.
replacements:
  - label: "email_addresses"
    pattern: "(?i)\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}\\b"
    replacement: "<email_redacted>"
    flags: ["i"]

# Report-only patterns example
scan_only_patterns:
  - label: "possible_patient_id"
    pattern: "\\b(PAT|PID|MRN|SUBJ)[-_ ]?\\d{3,8}\\b"
    flags: ["i"]

# === New: normalize file references to 'study.<ext>' in content ===
normalize_file_refs:
  enabled: true
  # Any filename ending with one of these extensions will have its *basename* set to 'study' in the content,
  # preserving the directory and extension. E.g., "/path/study.csv" -> "/path/study.csv"
  extensions:
    - ".csv"
    - ".tsv"
    - ".txt"
    - ".job"
    - ".sh"
    - ".batch"
    - ".R"
    - ".py"
  rename_files: false   # IMPORTANT: This only updates references in code/docs, not on-disk filenames.
